<?xml version="1.0" encoding="UTF-8"?>
<Configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Version="7.1"
               xsi:noNamespaceSchemaLocation="schemas/cd_storage_conf.xsd">
    <Global>
        <ObjectCache Enabled="false">
            <Policy Type="LRU" Class="com.tridion.cache.LRUPolicy">
                <!--
                            The maximum size of memory used by the cache. The string must consist a number
                            followed by units: "k" or "kb" for kilobytes; "m" or "mb" for megabytes (case insensitive)
                        -->
                <Param Name="MemSize" Value="16mb"/>
            </Policy>
            <!-- The Features element specifies classes that add additional functionality to the cache. -->
            <Features>
                <Feature Type="DependencyTracker" Class="com.tridion.cache.DependencyTracker"/>
            </Features>
            <!--
                          The optional RemoteSynchronization element specifies a remote Cache Channel Service.
                          The remote Cache Channel Service is used to send messages between caches that are running
                          on separate virtual machines. (For example, if the Broker and the Deployer run on separate
                          virtual machines.)
                          The Cache Channel Service must be running and listening on the configured host and port for
                          remote synchronization to function.
                          If this element is omitted, the cache does not use any inter-virtual machine cache communication.
                          You must use the RemoteSynchronization element in conjunction with the Cache Channel service in
                          order for objects to be updated or removed from the Broker's object cache when they are published
                          or unpublished using the Deployer.
                  -->
            <!-- RMI CacheChannel Connector example

                  <RemoteSynchronization Queuesize="128" ServiceMonitorInterval="10000" FlushCacheDuringDisconnectInterval="20000">
                      <Connector Class="com.tridion.cache.RMICacheChannelConnector" Host="127.0.0.1" Port="1099" />
                  </RemoteSynchronization>
                  -->
            <!-- JMS CacheChannel Connector example

                  <RemoteSynchronization Queuesize="128" ServiceMonitorInterval="10000" FlushCacheDuringDisconnectInterval="20000">
                      <Connector Class="com.tridion.cache.JMSCacheChannelConnector" Topic="topicName" TopicConnectionFactory="jndiNameOfConnectionFactory"/>
                  </RemoteSynchronization>
                  -->
        </ObjectCache>
        <Storages>
            <!--
                      Overriding default Tridion dao bundles.
                  -->
            <StorageBindings>
                <Bundle src="preview_dao_bundle.xml"/>
            </StorageBindings>
            <!--
                      Wrappers enhances the behaviour of DAOs for specific use cases.
                  -->
            <Wrappers>

                <Wrapper Name="SessionWrapper">
                    <Storage Type="persistence" Id="sessionDb" dialect="MSSQL"
                             Class="com.tridion.storage.persistence.JPADAOFactory">
                        <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120"/>
                        <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
                            <Property Name="serverName" Value="localhost"/>
                            <Property Name="portNumber" Value="1433"/>
                            <Property Name="databaseName" Value="Tridion_Session_Preview"/>
                            <Property Name="user" Value="TridionBrokerUser"/>
                            <Property Name="password" Value="Tr1d10n"/>
                        </DataSource>
                    </Storage>
                </Wrapper>
            </Wrappers>

            <Storage Type="persistence" Id="defaultdb" dialect="MSSQL"
                     Class="com.tridion.storage.persistence.JPADAOFactory">
                <Pool Type="jdbc" Size="10" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120"/>
                <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
                    <Property Name="serverName" Value="localhost"/>
                    <Property Name="portNumber" Value="1433"/>
                    <Property Name="databaseName" Value="Tridion_Broker_aws"/>
                    <Property Name="user" Value="TridionBrokerUser"/>
                    <Property Name="password" Value="Tr1d10n"/>
                </DataSource>
            </Storage>

        </Storages>
    </Global>
    <ItemTypes defaultStorageId="defaultdb" cached="false">
    </ItemTypes>

</Configuration>